<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/pages/main.css">
    <title>Document</title>
</head>

<body>

    <div class="header">
        <div class="header-top">
            <div class="img-menu">
                <img src="./assets/img/toggle.png" alt="">
            </div>
            <div class="icon-misa">
                <img src="./assets/img/cukcuk-logo.png" alt="">
            </div>
            <div class="server">
                <h5>Chi nhánh Hà Nội</h5>
                <img src="./assets/icon/btn-next-page.svg">
            </div>
            <div class="user">
                <div class="avt"><img src="./assets/icon/avatar-default.png" alt=""></div>
                <div class="name">Vũ Cao Dũng</div>
                <div class="dot"><img src="./assets/icon/option.png" alt=""></div>
            </div>
        </div>

        <div class="home">
            <div class="sidebar">
                <ul>
                    <li>
                        <a href="#"><img src="./assets/icon/dashboard.png" alt=""><span>Trang chủ</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./assets/icon/report.png" alt=""><span>Báo cáo</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./assets/icon/dic-employee.png" alt=""><span>Nhân viên</span></a>
                    </li>
                    <li>
                        <a href="#"><img src="./assets/icon/setting.png" alt=""><span>Cài đặt</span></a>
                    </li>
                </ul>
                <div class="close">
                    <img src="./assets/icon/btn-prev-page.svg" alt="">
                    <div class="close-text">Thu gọn</div>
                </div>
            </div>


            <div class="main">
                <div class="header-main">
                    <h2 class="text-manager">Quản lý nhân viên</h2>
                    <button class="button-add-employee">
                        <img src="./assets/icon/add.png" alt="">
                        <h5>Thêm mới</h5>
                    </button>
                </div>

                <div class="table">
                    <div class="search">
                        <input type="text" id="myInput" placeholder="Tìm kiếm theo mã, họ tên">
                        <div class="export">
                            <img src="./assets/icon/export-excel-50.png" alt="">
                        </div>
                        <div class="reload">
                            <img src="./assets/icon/refresh.png" alt="">
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Mã nhân viên</th>
                                    <th>Họ và tên</th>
                                    <th>Giới tính</th>
                                    <th>Ngày sinh</th>
                                    <th>Địa chỉ Email</th>
                                    <th>Địa chỉ</th>
                                </tr>
                            </thead>
                            <tbody id="myTable">
                                <!-- DBS -->
                            </tbody>
                        </table>
                    </div>

                    <div class="end-table">
                        <div class="sum-record">Tổng: 100</div>
                        <div class="record">
                            <div class="record-text">Số bản ghi/trang: 10</div>
                            <img src="./assets/icon/btn-prev-page.svg" alt="">
                        </div>
                        <div class="next-page">
                            <img src="./assets/icon/btn-prev-page.svg" alt="">
                            <img src="./assets/icon/btn-next-page.svg" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="form_nhanvien" style="display: none;">
        <form action="/submit_employee" method="post">
            <h2>Thông tin nhân viên</h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="id">Mã nhân viên</label>
                    <input type="text" id="id" name="id" required>
                </div>
                <div class="form-group">
                    <label for="name">Họ và Tên</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="dob">Ngày sinh</label>
                    <input type="text" id="dob" name="dob" placeholder="mm/dd/yyyy" required>
                </div>

                <div class="form-group">
                    <label for="gender">Giới tính</label>
                    <div class="gender">
                        <input type="radio" id="male" name="gender" value="male" required>
                        <label for="male">Nam</label>
                        <input type="radio" id="female" name="gender" value="female">
                        <label for="female">Nữ</label>
                        <input type="radio" id="none" name="gender" value="none">
                        <label for="none">Khác</label>
                    </div>
                </div>

            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="position">Vị trí</label>
                    <input type="text" id="position" name="position" required>
                </div>
                <div class="form-group">
                    <label for="id_number">Số CMTND</label>
                    <input type="text" id="id_number" name="id_number" required>
                </div>
                <div class="form-group">

                    <label for="issue_date">Ngày cấp</label>
                    <input type="text" id="issue_date" name="issue_date" placeholder="mm/dd/yyyy" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="department">Phòng ban</label>
                    <input type="text" id="department" name="department" required>
                </div>
                <div class="form-group">
                    <label for="issue_place">Nơi cấp</label>
                    <input type="text" id="issue_place" name="issue_place" required>
                </div>
            </div>

            <div class="form-group">
                <label for="address">Địa chỉ</label>
                <input type="text" id="address" name="address" required>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="mobile">ĐT Di động</label>
                    <input type="tel" id="mobile" name="mobile" required>
                </div>
                <div class="form-group">
                    <label for="phone">ĐT cố định</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">

                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="bank_account">Tài khoản ngân hàng</label>
                    <input type="text" id="bank_account" name="bank_account" required>
                </div>
                <div class="form-group">
                    <label for="bank_name">Tên ngân hàng</label>
                    <input type="text" id="bank_name" name="bank_name" required>
                </div>
                <div class="form-group">
                    <label for="branch">Chi nhánh</label>
                    <input type="text" id="branch" name="branch" required>
                </div>
            </div>
            <div class="buttons">
                <button type="button" class="cancel">Huỷ</button>
                <button type="submit" class="save">Cất</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('https://cukcuk.manhnv.net/api/v1/Customers')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    populateTable(data);
                })
                .catch(error => console.error('Error fetching data:', error));
        });

        function populateTable(customers) {
            const tableBody = document.getElementById('myTable');
            tableBody.innerHTML = '';

            customers.forEach((customer, index) => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${customer.CustomerCode}</td>
                    <td>${customer.FullName}</td>
                    <td>${customer.Gender}</td>
                    <td>${new Date(customer.DateOfBirth).toLocaleDateString()}</td>
                    <td>${customer.Email}</td>
                    <td class="address-cell">${customer.Address}
                        <div class="icons">
                            <div class="edit">
                                <img src="./assets/icon/delete-48.png" alt="Edit" class="action-icon">
                            </div>
                            <div class="copy">
                                <img src="./assets/icon/date-picker.svg" alt="Copy" class="action-icon">
                            </div>
                            <div class="delete">
                                <img src="./assets/icon/close-48.png" alt="Delete" class="action-icon">
                            </div>
                        </div>
                    </td>
                `;

                tableBody.appendChild(row);
            });
        }

        document.querySelector('.close').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            const isCollapsed = sidebar.classList.toggle('collapsed');
            const manager = document.querySelector('.button-add-employee');
            const exxport = document.querySelector('.export');
            const endtable = document.querySelector('.record');

            if (isCollapsed) {
                sidebar.style.width = '70px';
                manager.style.marginLeft = '1066px';
                exxport.style.marginLeft = '918px';
                endtable.style.paddingLeft = '1038px';
            } else {
                sidebar.style.width = '18%';
                manager.style.marginLeft = '908px';
                exxport.style.marginLeft = '802px';
                endtable.style.paddingLeft = '878px';
            }

            const closeText = document.querySelector('.close-text');
            closeText.style.display = isCollapsed ? 'none' : 'block';

            const closeIcon = document.querySelector('.close img');
            closeIcon.style.transform = isCollapsed ? 'rotate(180deg)' : 'rotate(0deg)';
        });

        document.querySelector('.cancel').addEventListener('click', function() {
            const inputs = document.querySelectorAll('.form_nhanvien input');
            inputs.forEach(input => input.value = '');
            const radios = document.querySelectorAll('.form_nhanvien input[type="radio"]');
            radios.forEach(radio => radio.checked = false);
            document.querySelector('.form_nhanvien').style.display = 'none';
        });

        document.querySelector('.button-add-employee').addEventListener('click', function() {
            document.querySelector('.form_nhanvien').style.display = 'block';
        });
    </script>

    <!-- <script>
        document.querySelector('.close').addEventListener('click', function() {
            const sidebar = document.querySelector('.sidebar');
            const isCollapsed = sidebar.classList.toggle('collapsed');
            const manager = document.querySelector('.button-add-employee');
            const exxport = document.querySelector('.export');
            const endtable = document.querySelector('.record');

            if (isCollapsed) {
                sidebar.style.width = '70px';
                manager.style.marginLeft = '1066px';
                exxport.style.marginLeft = '918px';
                endtable.style.paddingLeft = '1038px';
                // main.style.marginLeft = '50px';
            } else {
                sidebar.style.width = '18%';
                manager.style.marginLeft = '908px';
                exxport.style.marginLeft = '802px';
                endtable.style.paddingLeft = '878px';
                // main.style.marginLeft = '200px';
            }

            const closeText = document.querySelector('.close-text');
            closeText.style.display = isCollapsed ? 'none' : 'block';

            const closeIcon = document.querySelector('.close img');
            closeIcon.style.transform = isCollapsed ? 'rotate(180deg)' : 'rotate(0deg)';
        });

        // document.



        document.querySelector('.cancel').addEventListener('click', function() {
            const inputs = document.querySelectorAll('.form_nhanvien input');
            inputs.forEach(input => input.value = '');
            const radios = document.querySelectorAll('.form_nhanvien input[type="radio"]');
            radios.forEach(radio => radio.checked = false);
            document.querySelector('.form_nhanvien').style.display = 'none';
        });

        document.querySelector('.button-add-employee').addEventListener('click', function() {
            document.querySelector('.form_nhanvien').style.display = 'block';
        });
    </script> -->
</body>

</html>